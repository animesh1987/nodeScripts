{"version":3,"sources":["groceryGetter.js"],"names":[],"mappings":";;AAAA,IAAI,QAAQ,IAAI,IAAJ,EAAZ;AACA,IAAM,YAAY,CAAC,aAAD,EAAgB,aAAhB,CAAlB,C,CAAiD;AACjD,IAAM,kBAAkB,gCAAxB;AACA,IAAM,QAAQ,QAAQ,OAAR,CAAd;AACA,IAAM,WAAW,SAAjB;AACA,IAAM,IAAI,QAAQ,YAAR,CAAV;AACA,IAAM,gBAAgB,YAAtB;AACA,IAAM,QAAQ,QAAQ,OAAR,CAAd;AACA,IAAM,SAAS;AACX,UAAM,IADK;AAEX,YAAQ,WAFG;AAGX,cAAU,UAHC;AAIX,cAAU;AAJC,CAAf;;AAOA,IAAI,qyBAiB6C,eAjB7C,gBAAJ;;AAmBA,IAAI,s8BAkB6C,eAlB7C,gBAAJ;;AAoBA,MAAM,OAAN,CAAc,MAAd,EAAsB,UAAC,GAAD,EAAO;AACzB,QAAI,GAAJ,EAAS,QAAQ,GAAR,CAAY,GAAZ;;AAET,QAAI,UAAU,IAAI,MAAM,OAAV,EAAd;;AAEA,YAAQ,KAAR,CAAc,cAAd,EAA8B,UAAC,GAAD,EAAM,MAAN,EAAe;AACzC,YAAI,GAAJ,EAAS,QAAQ,GAAR,CAAY,GAAZ;;AAET,gBAAQ,GAAR,CAAY,MAAZ;;AAEA,gBAAQ,GAAR,CAAa,CAAC,IAAI,IAAJ,KAAa,KAAd,KAAwB,OAAO,EAA/B,CAAb;;AAEA,gBAAQ,IAAR;AACH,KARD;AASH,CAdD","file":"groceryGetter-compiled.js","sourcesContent":["let start = new Date();\nconst productId = [9300683501803, 9350763592825];/*9310386002156, 9300633268978*/\nconst productIdString = '(9300683501803, 9350763592825)';\nconst mssql = require('mssql');\nconst database = 'Grocery';\nconst _ = require('underscore');\nconst selectedStore = 'Woolworths';\nconst async = require('async');\nconst config = {\n    user: 'sa',\n    server: 'localhost',\n    password: 'Hb1400f?',\n    database: database\n};\n\nlet sameStoreQuery = `with e1 as\n                    (\n                        SELECT [PRODUCT_UPC_ID], price_type, price, row_number() over (partition by [PRODUCT_UPC_ID] order by price) as rn\n                        FROM\n                        (\n                            SELECT [PRODUCT_UPC_ID], [WOOLWORTHS_STD_RATE],[WOOLWORTHS_SPCL_RATE]\n                            FROM DETAIL_RETAILER_PRICING_LIST\n                        ) p\n\n                        UNPIVOT\n\n                        (price FOR price_type IN\n                            ([WOOLWORTHS_STD_RATE],[WOOLWORTHS_SPCL_RATE])\n                        ) AS unpvt\n                    )\n                    select PRODUCT_UPC_ID, price, price_type\n                    from e1\n                    where  [PRODUCT_UPC_ID] IN ${productIdString} and rn = 1`;\n\nlet mainQuery = `with e1 as\n                    (\n                        SELECT [PRODUCT_UPC_ID], price_type, price, row_number() over (partition by [PRODUCT_UPC_ID] order by price) as rn\n                        FROM\n                        (\n                            SELECT [PRODUCT_UPC_ID], [WOOLWORTHS_STD_RATE],[WOOLWORTHS_SPCL_RATE],\n                            [COLES_STD_RATE],[COLES_SPCL_RATE],[ALDI_STD_RATE],[ALDI_SPCL_RATE]\n                            FROM DETAIL_RETAILER_PRICING_LIST\n                        ) p\n\n                        UNPIVOT\n\n                        (price FOR price_type IN\n                            ([WOOLWORTHS_STD_RATE],[WOOLWORTHS_SPCL_RATE],[COLES_STD_RATE],[COLES_SPCL_RATE],[ALDI_STD_RATE],[ALDI_SPCL_RATE])\n                        ) AS unpvt\n                    )\n                    select PRODUCT_UPC_ID, price, price_type\n                    from e1\n                    where  [PRODUCT_UPC_ID] IN ${productIdString} and rn = 1`;\n\nmssql.connect(config, (err)=>{\n    if (err) console.log(err);\n\n    let request = new mssql.Request();\n\n    request.query(sameStoreQuery, (err, result)=>{\n        if (err) console.log(err);\n\n        console.log(result);\n\n        console.log( (new Date() - start) / (1000 * 60));\n\n        process.exit()\n    })\n})\n"]}